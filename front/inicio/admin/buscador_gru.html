<?php
require_once __DIR__.'/../../../back/conexion/conexion.php';
$conn = conectar_bd();
$sql = "SELECT nombre, grado FROM Grupos";
$result = $conn->query($sql);
?>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración</title>
    <link rel="stylesheet" href="panel.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <header>
        <div name="izquierda">
            <h2>Logo</h2>
        </div>
        <div name="derecha">
            <img src="person-circle.svg" alt="Avatar" style="width:40px; height:40px; border-radius:50%;">
            <button id="logout">Cerrar Sesion</button>
        </div>
    </header>
    <div class="container">
        <aside>
            <nav>
                <ul>
                    <li>
                        <a href="panel.html"><img src="arrow-left-circle-fill.svg" alt="Back"></a>
                        <p>Regresar</p>
                    </li>
                    <li>
                         <a href="aulas.html">
                        <img src="aula.png" alt="Aulas/etc"></a>
                        <p>Salones/Aulas</p>
                    </li>
                    <li>
                        <a href="recursos.php"><img src="recurso-educativo.png" alt="Recursos"></a>
                        <p>Recursos</p>
                    </li>
                    <li onclick="showBox()">
                        <img src="gear-fill.svg" alt="Configuración">
                        <p>Configuración</p>
                    </li>
                </ul>
            </nav>
        </aside>
        <main>
            <div class="texto">
                <h1>Lista de Grupos</h1>
                
                <!-- Lista de grupos -->
                <div id="listaGrupos">
                    <ul id="resultados_gru">
                        <?php
                        if ($result && $result->num_rows > 0) {
                            while ($row = $result->fetch_assoc()) {
                                echo "<li>" . htmlspecialchars($row['grado']) . " - " . htmlspecialchars($row['nombre']) . "</li>";    
                            
                            }
                        } else {
                            echo "<li>No hay grupos registrados.</li>";
                        }
                        ?>
                    </ul>
                    <button type="button" onclick="abrirModal('grupo')">Agregar grupo</button>
                </div>
            </div>
        </main>
            </div> 

    <div id="modalGrupo" class="modal" style="display:none;">
      <div class="modal-content">
        <span class="close" onclick="cerrarModal('grupo')">&times;</span>
        <h2>Agregar Grupo</h2>
    <form id="formGrupo">
        <input type="number" name="grado" placeholder="Grado del grupo" required>
       <input type="text" name="nombre" placeholder="Nombre del grupo" required>
       <button type="submit">Agregar grupo</button>
    </form>

<div id="mensajeGrupo"></div>

      </div>
    </div>
        <script src="panel.js" defer></script>
        <script src="../preferencias.js" defer></script>
</body>
</html>
<?php $conn->close(); ?>